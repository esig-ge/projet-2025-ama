/* =========================
   DK Bloom — commande.css
   ========================= */

/* --------- Variables --------- */
:root{
    --bg:#ffffff;
    --card:#ffffff;
    --ink:#1a1a1a;
    --muted:#777;                 /* corrigé: n’était pas lisible (#fff) */
    --accent:#8d0e0e;
    --accent-weak:#5e0808;
    --stroke:#e7e7ea;
    --shadow:0 10px 24px rgba(0,0,0,.06);
    --header-h:72px;
    --brand:#7a0000;              /* utilisé pour la sélection “livraison” */
}

/* --------- Reset + layout de page --------- */
*{box-sizing:border-box}
html,body{height:100%}

body{
    margin:0;
    color:var(--ink);
    background:var(--bg);
    font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Arial;
    display:flex; flex-direction:column; min-height:100vh;
    padding-top:var(--header-h);
}
main{flex:1}
.wrap{max-width:1100px;margin:0 auto;padding:16px}
.page-title{margin:18px 0 12px;text-align:center}

/* --------- Grille principale --------- */
.grid{
    display:grid;
    grid-template-columns: 1fr 360px;   /* liste | récap  */
    gap:24px; align-items:start;
}
@media (max-width:980px){ .grid{grid-template-columns:1fr} }

/* --------- Cartes --------- */
.card{
    background:var(--card);
    border:1px solid var(--stroke);
    border-radius:12px;
    box-shadow:var(--shadow);
    overflow:hidden;
}
.card.disabled{opacity:.6;filter:grayscale(.5)}
.card.empty{text-align:center;padding:24px;box-shadow:none;background:transparent}

/* --------- Utilitaires --------- */
.muted{color:var(--muted)}
.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}
a:focus,button:focus,input:focus{outline:2px solid rgba(141,14,14,.35);outline-offset:2px}

/* --------- Lignes du panier (alignées au markup de commande.php) --------- */
.cart-row{
    display:grid;
    grid-template-columns: 32px 64px 1fr auto auto auto; /* chk | img | nom | PU | total | actions */
    gap:12px; align-items:center; padding:12px 16px; border-top:1px solid #eee;
}
.cart-row:first-of-type{border-top:1px solid #eee}
.cart-row:last-child{border-bottom:none}

.cart-img{
    width:64px;height:64px; object-fit:cover;
    border-radius:8px; border:1px solid var(--stroke); background:#fafafa;
}
.cart-name{font-weight:600}
.item-sub{font-weight:400;font-size:12px;color:var(--muted)}

.cart-unit,.cart-total{justify-self:end}
@media (max-width:600px){
    .cart-row{grid-template-columns:32px 64px 1fr auto auto} /* masque le PU via CSS ci-dessous */
    .cart-unit{display:none}
}

/* --------- Bouton poubelle --------- */
.trash-form{margin:0}
.trash-btn{
    background:transparent;border:0;cursor:pointer;
    font-size:18px;line-height:1;color:var(--accent);
    padding:6px;border-radius:8px;
}
.trash-btn:hover{background:#b70f0f10}

/* --------- Barre “actions groupées” --------- */
.bulk-bar{
    display:flex;gap:8px;align-items:center;justify-content:space-between;
    padding:12px 16px;border-bottom:1px solid #eee;flex-wrap:wrap;
}
.left-actions{display:flex;gap:10px;align-items:center}
.btn-ghost.small{font-size:.9rem;padding:.35rem .7rem;white-space:nowrap}

/* --------- Récapitulatif (colonne droite) --------- */
.summary{padding:18px}
.sum-row,.sum-total{display:flex;justify-content:space-between;padding:10px 16px}
.sum-total{font-weight:700;border-top:1px solid #eee}

/* --------- CTA principal --------- */
.btn-primary{
    display:block;text-align:center;padding:12px 18px;border-radius:999px;
    background:var(--accent);color:#fff;text-decoration:none;font-weight:800;
    margin:12px 16px 8px;border:1px solid var(--accent);transition:background .15s ease;
}
.btn-primary:hover{background:var(--accent-weak);border-color:var(--accent-weak)}
.btn-primary[aria-disabled="true"]{background:#e9e9ec;border-color:#e9e9ec;color:#9b9ba0;pointer-events:none}
#btn-checkout[aria-disabled="true"]{pointer-events:none;opacity:.6}

/* --------- Coupon --------- */
.coupon{display:flex;gap:10px;margin:12px 16px}
.coupon input{
    flex:1;border-radius:12px;border:1px solid var(--stroke);
    background:#fff;color:var(--ink);padding:12px 14px;
}
.btn-ghost{
    min-width:32px;height:32px;padding:10px 14px;border-radius:999px;
    border:1px solid var(--stroke);background:#f7f7f8;color:var(--ink);
    font-weight:700;cursor:pointer;
}

/* --------- Aide --------- */
.help{border-top:1px solid var(--stroke);margin:12px 16px 0;padding-top:12px}
.help ul{margin:8px 0 0 18px;color:var(--muted)}

/* --------- Flash message --------- */
.flash{
    margin:12px auto;max-width:920px;background:#f6fff6;color:#0a6b0a;
    border:1px solid #bfe6bf;padding:10px 12px;border-radius:10px;
}

/* --------- Section livraison --------- */
.section-title{margin:18px 0 10px 0;font-size:18px;font-weight:700}
.shipping-block .section-title{margin:10px 16px}
.shipping-options{
    display:grid;grid-template-columns:repeat(auto-fit,minmax(190px,1fr));
    gap:18px;border:0;padding:0;margin:14px 16px 0;
}
.shipping-options .opt{display:block;position:relative}
.shipping-options .opt input[type="radio"]{
    position:absolute;inset:0;width:0;height:0;opacity:0;pointer-events:none;appearance:none;
}
.shipping-options .opt>span{
    display:block;padding:14px 18px;border:2px solid #e1e1e1;border-radius:14px;
    background:#fafafa;text-align:center;font-weight:500;line-height:1.25;color:#222;
    transition:transform .08s ease, background .2s ease, border-color .2s ease, box-shadow .2s ease;
}
.shipping-options .opt>span:hover{background:#f2f2f2;border-color:#d5d5d5}
.shipping-options .opt input[type="radio"]:focus-visible+span{outline:3px solid rgba(122,0,0,.25);outline-offset:2px}
.shipping-options .opt input[type="radio"]:checked+span{
    border-color:var(--brand);background:#fff6f6;color:var(--brand);
    box-shadow:0 4px 12px rgba(0,0,0,.10);transform:translateY(-1px);
}

/* --------- Zone commentaires --------- */
textarea.comment-box{
    width:100%;min-height:80px;resize:vertical;padding:12px 14px;
    font-size:14px;font-family:"Segoe UI",Arial,sans-serif;line-height:1.4;
    border:1.5px solid #ccc;border-radius:10px;outline:none;
    transition:all .3s ease;box-shadow:inset 0 1px 3px rgba(0,0,0,.08);
}
textarea.comment-box:focus{border-color:#8A1B2E;box-shadow:0 0 6px rgba(138,27,46,.3)}
textarea.comment-box::placeholder{color:#999;font-style:italic}

/* --------- États / responsif divers --------- */
.empty{display:flex;align-items:center;justify-content:center;min-height:280px;text-align:center;color:var(--muted)}
.empty strong{color:var(--ink)}
.dkb-footer{border-top:1px solid var(--stroke);margin-top:30px;color:var(--muted);background:#fff}

@media (prefers-reduced-motion:reduce){
    *{transition:none !important; animation:none !important}
}
